(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{1372:function(e,t,r){Promise.resolve().then(r.bind(r,7730))},7730:function(e,t,r){"use strict";let s;r.r(t),r.d(t,{default:function(){return N}});var n=r(7437),a=r(2265),o=r(4387),c=r(981),l=r.n(c),i=r(6691),d=r.n(i),h=r(1737);void 0!==window.ethereum?(window.ethereum.request({method:"eth_requestAccounts"}),s=new h.ZPm(window.ethereum)):s=new h.ZPm(new h.ZPm.providers.HttpProvider("https://mainnet.infura.io/v3/YOUR_INFURA_API_KEY"));var u=s,x=e=>{let{seed:t,onAccountChange:r}=e,[s,o]=(0,a.useState)(0),[c,l]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=i(t),r=Math.abs(e)%851;o(r)},[t]),(0,a.useEffect)(()=>{let e=async()=>{try{window.ethereum&&await window.ethereum.enable();let e=await u.eth.getAccounts(),t=(null==e?void 0:e[0])||null;l(t),r(t)}catch(e){console.error("Error fetching account:",e.message)}};e()},[]);let i=e=>{let t=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);t=(t<<5)-t+s}return t};return(0,n.jsx)("div",{children:c&&(0,n.jsx)("div",{children:(0,n.jsxs)("p",{children:["Connected Account: ",c]})})})},f=r(3807),p=r(7026);let m=e=>{let{setMessage:t,script:r}=e,s=r.split("\n"),[n,o]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=setInterval(()=>{n<s.length?(t(e=>e+(e?"\n":"")+s[n]),o(n+1)):clearInterval(e)},1e3);return()=>{clearInterval(e)}},[s,t,n]),null};var g=e=>{let{children:t}=e,[r,s]=(0,a.useState)("");return(0,n.jsxs)("div",{id:"App:CodeTerminal",style:{backgroundColor:"#000",padding:"1em",borderRadius:"5px",borderColor:"#913d88",color:"#fff",whiteSpace:"pre-wrap",wordWrap:"break-word"},children:[(0,n.jsx)(m,{setMessage:s,script:t}),r]})};let j=async(e,t)=>{switch(t.toLowerCase()){case"eth":return w(e);case"btc":return y(e);default:return console.error("Unsupported cryptocurrency"),null}},w=async e=>{try{let t="https://api.etherscan.io/api?module=account&action=txlist&address=".concat(e,"&startblock=0&endblock=99999999&sort=asc&apikey=").concat("QEX6DGCMDRPXRU89FKPUR4BG9AUMCR4FXD"),r=await fetch(t),s=await r.json();if("1"!==s.status)return console.error("Error fetching Etherscan data:",s.message),null;{let t=s.result.map(t=>({timestamp:new Date(1e3*parseInt(t.timeStamp)).toISOString(),type:e.toLowerCase()===t.from.toLowerCase()?"Sent":"Received",cryptocurrency:"ETH",thirdPartyIdacScore:Math.floor(1e3*Math.random()),usdAmount:parseFloat(t.value)/1e18,thirdPartyWallet:e.toLowerCase()===t.from.toLowerCase()?t.to:t.from}));return t}}catch(e){return console.error("Error fetching Etherscan data:",e),[]}},y=async e=>{try{let t="https://api.blockcypher.com/v1/btc/main/addrs/".concat(e,"/full?token=").concat(""),r=await fetch(t),s=await r.json();if(s.error)return console.error("Error fetching BlockCypher data:",s.error),null;{let t=s.txs.map(t=>({timestamp:new Date(t.received).toISOString(),type:e.toLowerCase()===t.inputs[0].addresses[0].toLowerCase()?"Sent":"Received",cryptocurrency:"BTC",thirdPartyIdacScore:Math.floor(1e3*Math.random()),usdAmount:t.outputs.reduce((e,t)=>e+t.value,0)/1e8,thirdPartyWallet:e.toLowerCase()===t.inputs[0].addresses[0].toLowerCase()?t.outputs[0].addresses[0]:t.inputs[0].addresses[0]}));return t}}catch(e){return console.error("Error fetching BlockCypher data:",e),[]}},v=async(e,t,r,s)=>{try{var n,a;let c=await j(e,"eth");null==c||c.map((e,t)=>"Transaction ".concat(t+1," - ").concat(e.type,": ").concat(e.usdAmount," USD involving ").concat(e.thirdPartyWallet,".")).join("\n");let l={model:"gpt-3.5-turbo",messages:[{role:"system",content:"Provide and Analyze the iDAC Trust Score ".concat(s," for Ethereum address ").concat(e," to identify potential malicious activities. Consider data associated with ").concat(t)},{role:"user",content:" for relationship between Ethereum addresses ".concat(e," and ").concat(t,".")},{role:"assistant",content:r}]};console.log("Request payload:",l);let i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("")},body:JSON.stringify(l)});console.log("Response status:",i.status);let d=await i.json();if(console.log("Response data:",d),!d.choices||!(d.choices.length>0))return console.error("No insights available."),null;{let t=null===(a=d.choices[0])||void 0===a?void 0:null===(n=a.message)||void 0===n?void 0:n.content;if(console.log("Insights:",t),null!=t)return await (0,o.n6)({insights:t,timestamp:Date.now(),userAddress:e}),t;return console.error("Insights text is undefined or null."),null}}catch(e){return console.error("Error generating insights:",e),null}},b=e=>e>=850?"green":e>=740?"yellow":e>=630?"orange":e>=410?"red":e>=310?"black":"grey";var N=()=>{let e=(0,a.useRef)(!1),[t,r]=(0,a.useState)(""),[s,c]=(0,a.useState)(null),[i,h]=(0,a.useState)(""),[m,w]=(0,a.useState)(null),[y,N]=(0,a.useState)([]);(0,a.useEffect)(()=>(e.current=!0,(0,o.JQ)(t=>{e.current&&N(t||[])}),()=>{e.current=!1}),[]);let A=e=>/^(0x)?[0-9a-fA-F]{40}$/.test(e)||/^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/.test(e),C=async()=>{try{let e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);if(e)window.location.href="https://idefi.ai/dapp";else{let e=await u.eth.requestAccounts(),t=(null==e?void 0:e[0])||null;w(t),r(t||""),window.location.reload()}}catch(e){console.error("Error connecting wallet:",e.message)}};(0,a.useEffect)(()=>{let t=async()=>{try{let e=await u.eth.getAccounts(),t=(null==e?void 0:e[0])||null;w(t),r(t||"")}catch(e){console.error("Error fetching account:",e.message)}};e.current&&!m&&t()},[m]);let S=async()=>{let e=m||t;if(!A(e)){alert("Invalid Address. Please enter a valid address.");return}let r=await j(e,"eth");if(r&&r.length>0){(0,o.tL)({userId:e}),r.forEach(e=>{(0,o.Ug)(e)}),N(r);let t=E(e);c(t),alert("Transaction history loaded succesfully!");try{let t=P(e,"",r,s),n=await v(e,"",t,s);console.log("Insights response:",n),n?"string"==typeof n?(h(n),(0,o.zb)({userAddress:e,insights:n,timestamp:Date.now()})):console.error("Invalid insights response:",n):console.error("Insights response is null.")}catch(e){console.error("Error generating insights:",e)}}else{N([]),c(null),console.log("No transactions available for the given address."),alert("No transactions or score available for the given address.");return}},P=(e,t,r,s)=>{let n=r.map((e,t)=>"Transaction ".concat(t+1," - ").concat(e.type,": ").concat(e.usdAmount," USD involving ").concat(e.thirdPartyWallet,".")).join("\n"),a="\n      Analyze iDAC Trust Score for Ethereum address ".concat(e," to identify potential malicious activities. Provide insights for the relationship between addresses ").concat(e," and ").concat(t,". iDAC Trust Score: ").concat(s,".\n      ").concat(n,"\n    ");return console.log("Generated OpenAI Prompt:",a),a},E=e=>{let t=I(e);return Math.abs(t)%851},I=e=>{let t=0;for(let r=0;e&&r<e.length;r++){let s=e.charCodeAt(r);t=(t<<5)-t+s}return t};return(0,n.jsxs)("div",{className:"main-container",children:[(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:"dAPP - iDAC"})}),(0,n.jsx)("section",{className:"bg-black",children:(0,n.jsxs)("div",{className:"layout flex min-h-screen flex-col items-center justify-center py-12 text-center",children:[(0,n.jsx)("h1",{className:"text-white font-bold text-4xl mb-6",children:"dAPP - iDAC"}),(0,n.jsx)("h4",{children:"Connect wallet or enter address"}),(0,n.jsx)("p",{children:"Generate iDAC Trust Score with DeFi-AI"}),(0,n.jsx)("hr",{style:{border:"none",borderRadius:"5px",borderBottom:"3px solid grey",width:"100%",margin:"30px 0"}}),(0,n.jsx)("div",{className:"image-container",style:{padding:"50px"},children:(0,n.jsx)(d(),{src:"/idacscore.png",alt:"idacscore",width:1600,height:1e3})}),null!==s&&(0,n.jsx)("div",{className:" ".concat(b(s)),children:(0,n.jsx)(f.Z,{seed:t.toLowerCase(),generatedScore:s})}),(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)("button",{onClick:C,style:{backgroundColor:"#913d88",color:"white",fontWeight:"300",margin:"10px",padding:"10px",borderRadius:"5px"},children:"Connect Wallet"}),(0,n.jsx)("button",{onClick:S,style:{backgroundColor:"#913d88",color:"white",fontWeight:"300",margin:"10px",padding:"10px",borderRadius:"5px"},children:"Generate Score"})]}),(0,n.jsx)(x,{seed:t,onAccountChange:e=>{w(e),r(e||"")}}),(0,n.jsx)("input",{type:"text",placeholder:" ETH or BTC",value:t,onChange:e=>r(e.target.value),style:{textAlign:"center",backgroundColor:"#f0f0f0",color:"black",margin:"10px 0"}}),(0,n.jsx)("hr",{style:{border:"none",borderRadius:"5px",borderBottom:"3px solid grey",width:"100%",margin:"90px 0"}}),null!==s&&y.length>0&&(0,n.jsx)(p.Z,{transactions:y,overallScore:s}),null!==s&&0===y.length&&(0,n.jsx)("p",{children:"No transactions available for the given address."}),(0,n.jsxs)("div",{className:"header container",children:[(0,n.jsx)("h2",{children:"iDAC AI:"}),(0,n.jsx)(g,{children:i})]})]})})]})}},3807:function(e,t,r){"use strict";var s=r(7437),n=r(2265),a=r(6691),o=r.n(a);t.Z=e=>{var t;let{seed:r,generatedScore:a}=e,[c,l]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(null!==a)l(a);else if(r.toLowerCase().startsWith("0x")||r.toLowerCase().startsWith("bc1")){let e=i(r),t=Math.abs(e)%851;l(t)}else l(null)},[r,a]);let i=e=>{let t=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);t=(t<<5)-t+s}return t},d=null!==a?null===(t=a)?"grey":t>=850?"green":t>=740?"yellow":t>=670?"orange":t>=580?"red":t>=450?"black":"grey":"grey";return(0,s.jsx)("div",{className:"hexagon-container ".concat(d),children:(0,s.jsxs)("div",{className:"hexagon-poc",children:[(0,s.jsx)("span",{className:"score",style:{color:"white",fontSize:"4vw"},children:null!==c?c:"Score"}),null!==c&&(0,s.jsx)("div",{className:"inner-hexagon",children:(0,s.jsx)(o(),{src:"/".concat(d,".png"),alt:"Hexagon",layout:"responsive",width:100,height:100,className:"hexagon-image"})})]})})}},7026:function(e,t,r){"use strict";var s=r(7437),n=r(428),a=r.n(n);r(2265);var o=r(6691),c=r.n(o);let l=(e,t)=>null===t?"grey":e>=850?"green":e>=740?"yellow":e>=670?"orange":e>=580?"red":e>=450?"black":"grey",i=e=>e>=850?"Excellent":e>=740?"Good":e>=670?"Fair":e>=580?"Poor":e>=450?"Bad":"New",d=e=>{if(e.length<=10)return e;let t=e.slice(0,6),r=e.slice(-4);return"".concat(t,"...").concat(r)};t.Z=e=>{let{transactions:t,overallScore:r}=e;return(0,s.jsxs)("div",{className:"jsx-487dc22868f0380d score-transactions",children:[(0,s.jsx)("h2",{className:"jsx-487dc22868f0380d",children:"Transaction History"}),(0,s.jsx)("div",{className:"jsx-487dc22868f0380d table-container",children:(0,s.jsx)("div",{className:"jsx-487dc22868f0380d scroll-view",children:Array.isArray(t)&&t.length>0?(0,s.jsx)("div",{className:"jsx-487dc22868f0380d table-responsive",children:(0,s.jsxs)("table",{className:"jsx-487dc22868f0380d",children:[(0,s.jsx)("thead",{className:"jsx-487dc22868f0380d",children:(0,s.jsxs)("tr",{className:"jsx-487dc22868f0380d",children:[(0,s.jsx)("th",{className:"jsx-487dc22868f0380d",children:"Party Score"}),(0,s.jsx)("th",{className:"jsx-487dc22868f0380d",children:"Category"}),(0,s.jsx)("th",{className:"jsx-487dc22868f0380d",children:"Type"}),(0,s.jsx)("th",{className:"jsx-487dc22868f0380d",children:"Party Wallet"}),(0,s.jsx)("th",{className:"jsx-487dc22868f0380d",children:"Timestamp"}),(0,s.jsx)("th",{className:"jsx-487dc22868f0380d",children:"Crypto"}),(0,s.jsx)("th",{className:"jsx-487dc22868f0380d",children:"Amount"})]})}),(0,s.jsx)("tbody",{className:"jsx-487dc22868f0380d",children:t.map((e,t)=>(0,s.jsxs)("tr",{className:"jsx-487dc22868f0380d",children:[(0,s.jsxs)("td",{className:"jsx-487dc22868f0380d score-transactions",children:[(0,s.jsx)("div",{className:"jsx-487dc22868f0380d txn-hex",children:(0,s.jsx)(c(),{src:"/".concat(l(e.thirdPartyIdacScore,r),".png"),alt:"Hexagon",width:15,height:15})}),(0,s.jsx)("div",{className:"jsx-487dc22868f0380d tab-score",children:e.thirdPartyIdacScore})]}),(0,s.jsx)("td",{className:"jsx-487dc22868f0380d "+(i(e.thirdPartyIdacScore)||""),children:i(e.thirdPartyIdacScore)}),(0,s.jsx)("td",{className:"jsx-487dc22868f0380d",children:e.type}),(0,s.jsx)("td",{className:"jsx-487dc22868f0380d wallet",children:(0,s.jsx)("div",{title:e.thirdPartyWallet,className:"jsx-487dc22868f0380d shortened-wallet",children:d(e.thirdPartyWallet)})}),(0,s.jsx)("td",{className:"jsx-487dc22868f0380d",children:e.timestamp}),(0,s.jsx)("td",{className:"jsx-487dc22868f0380d",children:e.cryptocurrency}),(0,s.jsxs)("td",{className:"jsx-487dc22868f0380d",children:["$",e.usdAmount.toFixed(2)]})]},t))})]})}):(0,s.jsx)("p",{className:"jsx-487dc22868f0380d",children:"No transactions available for the given address."})})}),(0,s.jsx)(a(),{id:"487dc22868f0380d",children:".score-transactions.jsx-487dc22868f0380d{margin-top:20px}.table-container.jsx-487dc22868f0380d{overflow:auto}.scroll-view.jsx-487dc22868f0380d{max-height:400px;overflow:auto}.table-responsive.jsx-487dc22868f0380d{width:100%;overflow-x:auto}table.jsx-487dc22868f0380d{width:100%;border-collapse:collapse;margin-top:10px}th.jsx-487dc22868f0380d,td.jsx-487dc22868f0380d{border:2px solid#ddd;padding:8px;text-align:left}.txn-hex.jsx-487dc22868f0380d{margin-right:8px}.tab-score.jsx-487dc22868f0380d{max-width:100px;color:white}.wallet.jsx-487dc22868f0380d{word-break:break-all}.shortened-wallet.jsx-487dc22868f0380d{max-width:100px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}@media(max-width:600px){th.jsx-487dc22868f0380d,td.jsx-487dc22868f0380d{font-size:8px;padding:3px}.tab-score.jsx-487dc22868f0380d{max-width:25px}}.Excellent.jsx-487dc22868f0380d{color:green}.Good.jsx-487dc22868f0380d{color:yellow}.Fair.jsx-487dc22868f0380d{color:orange}.Poor.jsx-487dc22868f0380d{color:red}.Bad.jsx-487dc22868f0380d{color:black;border:1px solid white}.New.jsx-487dc22868f0380d{color:grey}"})]})}},4387:function(e,t,r){"use strict";r.d(t,{JQ:function(){return v},Ug:function(){return w},Zk:function(){return u},n6:function(){return g},qj:function(){return d},tL:function(){return j},tc:function(){return h},zb:function(){return y}});var s=r(994),n=r(3085),a=r(2307);let o=(0,s.ZF)({apiKey:"AIzaSyDEpLst3tiorsfPk2ZXiw-eGmSVlulxe1Y",authDomain:"idefiai.firebaseapp.com",projectId:"idefiai",storageBucket:"idefiai.appspot.com",messagingSenderId:"256088643029",appId:"1:256088643029:web:85dfdd43c402dda5e3195c"}),c=(0,n.v0)(),l=new n.hJ,i=(0,a.N8)(o),d=()=>(0,n.rh)(c,l),h=(e,t)=>(0,n.e5)(c,e,t),u=(e,t)=>(0,n.Xb)(c,e,t),x=(0,a.iH)(i,"jsondata"),f=(0,a.iH)(i,"userid"),p=(0,a.iH)(i,"insights"),m=(0,a.iH)(i,"transactions"),g=e=>(0,a.VF)(x,e),j=e=>(0,a.VF)(f,e),w=e=>(0,a.VF)(m,e),y=e=>(console.log("Attempting to push insights:",e),(0,a.VF)(p,{openAIResponse:e.openAIResponse||null,timestamp:e.timestamp,userAddress:e.userAddress,insights:e.insights}).then(()=>console.log("Insights pushed successfully")).catch(e=>console.error("Error pushing insights:",e))),v=e=>{(0,a.jM)(m,t=>{let r=t.val();e(r)})}}},function(e){e.O(0,[481,214,222,372,908,971,596,744],function(){return e(e.s=1372)}),_N_E=e.O()}]);