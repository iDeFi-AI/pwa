(() => {
var exports = {};
exports.id = 321;
exports.ids = [321];
exports.modules = {

/***/ 8038:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react");

/***/ }),

/***/ 8704:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-dom/server-rendering-stub");

/***/ }),

/***/ 7897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-server-dom-webpack/client");

/***/ }),

/***/ 6786:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react/jsx-runtime");

/***/ }),

/***/ 5868:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/app-render");

/***/ }),

/***/ 1844:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/get-segment-param");

/***/ }),

/***/ 6624:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/helpers/interception-routes");

/***/ }),

/***/ 5281:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/route-modules/route-module");

/***/ }),

/***/ 7085:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/app-router-context");

/***/ }),

/***/ 1830:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/get-img-props");

/***/ }),

/***/ 199:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hash");

/***/ }),

/***/ 6864:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/head");

/***/ }),

/***/ 9569:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hooks-client-context");

/***/ }),

/***/ 2210:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-config");

/***/ }),

/***/ 5359:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-config-context");

/***/ }),

/***/ 7160:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router-context");

/***/ }),

/***/ 893:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix");

/***/ }),

/***/ 2336:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/format-url");

/***/ }),

/***/ 7887:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/handle-smooth-scroll");

/***/ }),

/***/ 8735:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ 120:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-local-url");

/***/ }),

/***/ 8231:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-path");

/***/ }),

/***/ 4614:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/path-has-prefix");

/***/ }),

/***/ 3750:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash");

/***/ }),

/***/ 982:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/resolve-href");

/***/ }),

/***/ 9618:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/server-inserted-html");

/***/ }),

/***/ 8423:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils");

/***/ }),

/***/ 8658:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils/warn-once");

/***/ }),

/***/ 9491:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 4300:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 6113:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 2361:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 7147:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 3685:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 5687:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 1808:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 6005:
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ 2037:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 1017:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 5477:
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ 2781:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 1576:
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ 4404:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 7310:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 3837:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 9796:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 1085:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   originalPathname: () => (/* binding */ originalPathname),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7262);
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9513);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1823);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2502);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if(["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
// @ts-ignore this need to be imported from next/dist to be external


const AppPageRouteModule = next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule;
// We inject the tree and pages here so that we can use them in the route
// module.
const tree = {
        children: [
        '',
        {
        children: [
        '(primary)',
        {
        children: [
        'dapp',
        {
        children: ['__PAGE__', {}, {
          page: [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 8054)), "/home/k3ytoshi/iDeFi-AI-PWA/src/app/(primary)/dapp/page.tsx"],
          
        }]
      },
        {
        'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 2261)), "/home/k3ytoshi/iDeFi-AI-PWA/src/app/(primary)/dapp/layout.tsx"],
        
      }
      ]
      },
        {
        'not-found': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 5493, 23)), "next/dist/client/components/not-found-error"],
        
      }
      ]
      },
        {
        'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 9376)), "/home/k3ytoshi/iDeFi-AI-PWA/src/app/layout.tsx"],
'not-found': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 8275)), "/home/k3ytoshi/iDeFi-AI-PWA/src/app/not-found.tsx"],
        
      }
      ]
      }.children;
const pages = ["/home/k3ytoshi/iDeFi-AI-PWA/src/app/(primary)/dapp/page.tsx"];

// @ts-expect-error - replaced by webpack/turbopack loader

const __next_app_require__ = __webpack_require__
const __next_app_load_chunk__ = () => Promise.resolve()
const originalPathname = "/(primary)/dapp/page";
const __next_app__ = {
    require: __next_app_require__,
    loadChunk: __next_app_load_chunk__
};

// Create and export the route module that will be consumed.
const routeModule = new AppPageRouteModule({
    definition: {
        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,
        page: "/(primary)/dapp/page",
        pathname: "/dapp",
        // The following aren't used in production.
        bundlePath: "",
        filename: "",
        appPaths: []
    },
    userland: {
        loaderTree: tree
    }
});

//# sourceMappingURL=app-page.js.map

/***/ }),

/***/ 2338:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 43))

/***/ }),

/***/ 43:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ page)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(6786);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(8038);
// EXTERNAL MODULE: ./src/utilities/firebaseClient.ts
var firebaseClient = __webpack_require__(1297);
// EXTERNAL MODULE: ./node_modules/next/dist/client/components/noop-head.js
var noop_head = __webpack_require__(9081);
var noop_head_default = /*#__PURE__*/__webpack_require__.n(noop_head);
// EXTERNAL MODULE: ./node_modules/next/image.js
var next_image = __webpack_require__(2451);
var image_default = /*#__PURE__*/__webpack_require__.n(next_image);
// EXTERNAL MODULE: ./node_modules/web3/lib/esm/index.js + 243 modules
var esm = __webpack_require__(4656);
;// CONCATENATED MODULE: ./src/utilities/web3Utils.ts
// web3Utils.ts

let web3;
if (false) {} else {
    // Fallback to a local provider or Infura
    web3 = new esm/* default */.ZPm(new esm/* default.providers */.ZPm.providers.HttpProvider("https://mainnet.infura.io/v3/YOUR_INFURA_API_KEY"));
}
/* harmony default export */ const web3Utils = (web3);

;// CONCATENATED MODULE: ./src/components/layouts/EthIDAC.tsx
// Import necessary libraries and components



const EthIDAC = ({ seed, onAccountChange })=>{
    const [currentScore, setCurrentScore] = (0,react_.useState)(0);
    const [account, setAccount] = (0,react_.useState)(null);
    (0,react_.useEffect)(()=>{
        const hash = hashCode(seed);
        const uniqueScore = Math.abs(hash) % 851; // Ensure it's between 0 and 850
        setCurrentScore(uniqueScore);
    }, [
        seed
    ]);
    (0,react_.useEffect)(()=>{
        const fetchAccount = async ()=>{
            try {
                if (window.ethereum) {
                    // Request account access if not already granted
                    await window.ethereum.enable();
                }
                const accounts = await web3Utils.eth.getAccounts();
                const fetchedAccount = accounts?.[0] || null;
                setAccount(fetchedAccount);
                onAccountChange(fetchedAccount); // Call the callback prop
            } catch (error) {
                console.error("Error fetching account:", error.message);
            }
        };
        fetchAccount();
    }, []); // Fetch account on component mount
    const hashCode = (str)=>{
        let hash = 0;
        for(let i = 0; i < str.length; i++){
            const char = str.charCodeAt(i);
            hash = (hash << 5) - hash + char;
        }
        return hash;
    };
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        children: account && /*#__PURE__*/ jsx_runtime_.jsx("div", {
            children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                children: [
                    "Connected Account: ",
                    account
                ]
            })
        })
    });
};
/* harmony default export */ const layouts_EthIDAC = (EthIDAC);

// EXTERNAL MODULE: ./src/components/layouts/ScoreHexa.tsx
var ScoreHexa = __webpack_require__(9042);
// EXTERNAL MODULE: ./src/components/layouts/ScoreTxns.tsx
var ScoreTxns = __webpack_require__(9586);
;// CONCATENATED MODULE: ./src/components/layouts/CodeTerminal.tsx


const MagicOcean = ({ setMessage, script })=>{
    const lines = script.split("\n");
    const [index, setIndex] = (0,react_.useState)(0);
    (0,react_.useEffect)(()=>{
        const timer = setInterval(()=>{
            if (index < lines.length) {
                setMessage((prevMessage)=>prevMessage + (prevMessage ? "\n" : "") + lines[index]);
                setIndex(index + 1);
            } else {
                clearInterval(timer);
            }
        }, 1000); // Adjust the interval as needed
        return ()=>{
            clearInterval(timer);
        };
    }, [
        lines,
        setMessage,
        index
    ]);
    return null;
};
const CodeTerminal = ({ children })=>{
    const [message, setMessage] = (0,react_.useState)("");
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        id: "App:CodeTerminal",
        style: {
            backgroundColor: "#000",
            padding: "1em",
            borderRadius: "5px",
            borderColor: "#913d88",
            color: "#fff",
            whiteSpace: "pre-wrap",
            wordWrap: "break-word"
        },
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(MagicOcean, {
                setMessage: setMessage,
                script: children
            }),
            message
        ]
    });
};
/* harmony default export */ const layouts_CodeTerminal = (CodeTerminal);

;// CONCATENATED MODULE: ./src/constants/env.ts
const isProd = (/* unused pure expression or super */ null && ("production" === "production"));
const isLocal = (/* unused pure expression or super */ null && ("production" === "development"));
// constants/env.ts
const openaiApiKey = "";
const showLogger = (/* unused pure expression or super */ null && ( true || 0));

;// CONCATENATED MODULE: ./src/utilities/dataUtils.ts
// dataUtils.ts


const fetchData = async (address, cryptocurrency)=>{
    switch(cryptocurrency.toLowerCase()){
        case "eth":
            return fetchEtherscanData(address);
        case "btc":
            return fetchBlockCypherData(address);
        default:
            console.error("Unsupported cryptocurrency");
            return null;
    }
};
const fetchEtherscanData = async (address)=>{
    try {
        const ethApiKey = "QEX6DGCMDRPXRU89FKPUR4BG9AUMCR4FXD"; // Replace with your Etherscan API key
        const ethUrl = `https://api.etherscan.io/api?module=account&action=txlist&address=${address}&startblock=0&endblock=99999999&sort=asc&apikey=${ethApiKey}`;
        const ethResponse = await fetch(ethUrl);
        const ethData = await ethResponse.json();
        if (ethData.status === "1") {
            const transactions = ethData.result.map((tx)=>({
                    timestamp: new Date(parseInt(tx.timeStamp) * 1000).toISOString(),
                    type: address.toLowerCase() === tx.from.toLowerCase() ? "Sent" : "Received",
                    cryptocurrency: "ETH",
                    thirdPartyIdacScore: Math.floor(Math.random() * 1000),
                    usdAmount: parseFloat(tx.value) / 1e18,
                    thirdPartyWallet: address.toLowerCase() === tx.from.toLowerCase() ? tx.to : tx.from
                }));
            return transactions;
        } else {
            console.error("Error fetching Etherscan data:", ethData.message);
            return null;
        }
    } catch (error) {
        console.error("Error fetching Etherscan data:", error);
        return []; // Return an empty array in case of an error
    }
};
const fetchBlockCypherData = async (address)=>{
    try {
        // Use openaiApiKey here instead of hardcoding the API key
        const btcApiKey = openaiApiKey; // Replace with your BlockCypher API key
        const btcUrl = `https://api.blockcypher.com/v1/btc/main/addrs/${address}/full?token=${btcApiKey}`;
        const btcResponse = await fetch(btcUrl);
        const btcData = await btcResponse.json();
        if (!btcData.error) {
            const transactions = btcData.txs.map((tx)=>({
                    timestamp: new Date(tx.received).toISOString(),
                    type: address.toLowerCase() === tx.inputs[0].addresses[0].toLowerCase() ? "Sent" : "Received",
                    cryptocurrency: "BTC",
                    thirdPartyIdacScore: Math.floor(Math.random() * 1000),
                    usdAmount: tx.outputs.reduce((sum, output)=>sum + output.value, 0) / 1e8,
                    thirdPartyWallet: address.toLowerCase() === tx.inputs[0].addresses[0].toLowerCase() ? tx.outputs[0].addresses[0] : tx.inputs[0].addresses[0]
                }));
            return transactions;
        } else {
            console.error("Error fetching BlockCypher data:", btcData.error);
            return null;
        }
    } catch (error) {
        console.error("Error fetching BlockCypher data:", error);
        return []; // Return an empty array in case of an error
    }
};
// Generate OpenAI prompt based on transactions
const generateOpenAIPrompt = (userAddress, otherAddress, transactions, generatedScore)=>{
    const transactionDetails = transactions.map((txn, index)=>`Transaction ${index + 1} - ${txn.type}: ${txn.usdAmount} USD involving ${txn.thirdPartyWallet}.`).join("\n");
    const prompt = `
    Provide an iDAC (Digital Asset Crypto) iDAC Trust Score: ${generatedScore}.
    ${transactionDetails}
    `;
    // Log the generated prompt
    console.log("Generated OpenAI Prompt:", prompt);
    return prompt;
};
// Generate insights using OpenAI API
const generateInsights = async (userAddress, otherAddress, openAIPrompt, generatedScore)=>{
    try {
        // Generate transaction details based on transactions
        const transactions = await fetchData(userAddress, "eth");
        const transactionDetails = transactions?.map((txn, index)=>`Transaction ${index + 1} - ${txn.type}: ${txn.usdAmount} USD involving ${txn.thirdPartyWallet}.`).join("\n") || "";
        // Construct the request payload
        const payload = {
            model: "gpt-3.5-turbo",
            messages: [
                {
                    role: "system",
                    content: `Provide and Analyze the iDAC Trust Score ${generatedScore} for Ethereum address ${userAddress} to identify potential malicious activities. Consider data associated with ${otherAddress}`
                },
                {
                    role: "user",
                    content: ` for relationship between Ethereum addresses ${userAddress} and ${otherAddress}.`
                },
                {
                    role: "assistant",
                    content: openAIPrompt
                }
            ]
        };
        // Log the payload to check if it's correct
        console.log("Request payload:", payload);
        // Make the API request with the API key in the Authorization header
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": `Bearer ${openaiApiKey}`
            },
            body: JSON.stringify(payload)
        });
        // Log the response status and data
        console.log("Response status:", response.status);
        const responseData = await response.json();
        console.log("Response data:", responseData);
        // Check if the data is in the expected format
        if (responseData.choices && responseData.choices.length > 0) {
            // Access specific properties of the response as needed
            const insightsText = responseData.choices[0]?.message?.content;
            // Log the insights text
            console.log("Insights:", insightsText);
            if (insightsText !== undefined && insightsText !== null) {
                // Store insights in the database
                await (0,firebaseClient/* storeJsonData */.n6)({
                    insights: insightsText,
                    timestamp: Date.now(),
                    userAddress
                });
                return insightsText;
            } else {
                console.error("Insights text is undefined or null.");
                return null;
            }
        } else {
            console.error("No insights available.");
            return null;
        }
    } catch (error) {
        console.error("Error generating insights:", error);
        return null;
    }
};

;// CONCATENATED MODULE: ./src/app/(primary)/dapp/page.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 
// Import necessary libraries and components










const getColorForScore = (score)=>{
    if (score >= 850) {
        return "green";
    } else if (score >= 740) {
        return "yellow";
    } else if (score >= 630) {
        return "orange";
    } else if (score >= 410) {
        return "red";
    } else if (score >= 310) {
        return "black";
    } else {
        return "grey";
    }
};
const DApp = ()=>{
    const mounted = (0,react_.useRef)(false);
    const [userAddress, setUserAddress] = (0,react_.useState)("");
    const [generatedScore, setGeneratedScore] = (0,react_.useState)(null);
    const [insights, setInsights] = (0,react_.useState)("");
    const [connectedAccount, setConnectedAccount] = (0,react_.useState)(null);
    const [transactions, setTransactions] = (0,react_.useState)([]);
    const otherAddress = ""; // Adjust this value based on your requirements
    (0,react_.useEffect)(()=>{
        mounted.current = true;
        // Listen to changes in transactions and update the state
        (0,firebaseClient/* listenToTransactions */.JQ)((data)=>{
            if (mounted.current) {
                setTransactions(data || []);
            }
        });
        return ()=>{
            mounted.current = false;
        };
    }, []);
    const isValidAddress = (address)=>{
        const ethRegExp = /^(0x)?[0-9a-fA-F]{40}$/;
        const btcRegExp = /^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/;
        return ethRegExp.test(address) || btcRegExp.test(address);
    };
    const handleAccountChange = (account)=>{
        setConnectedAccount(account);
        setUserAddress(account || ""); // Set userAddress when account changes
    };
    const connectWallet = async ()=>{
        try {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            if (isMobile) {
                window.location.href = "https://idefi.ai/dapp"; // Redirect to the mobile wallet deep link
            } else {
                const accounts = await web3Utils.eth.requestAccounts();
                const fetchedAccount = accounts?.[0] || null;
                setConnectedAccount(fetchedAccount);
                setUserAddress(fetchedAccount || "");
                window.location.reload();
            }
        } catch (error) {
            console.error("Error connecting wallet:", error.message);
        }
    };
    (0,react_.useEffect)(()=>{
        const fetchAccount = async ()=>{
            try {
                const accounts = await web3Utils.eth.getAccounts();
                const fetchedAccount = accounts?.[0] || null;
                setConnectedAccount(fetchedAccount);
                setUserAddress(fetchedAccount || ""); // Set userAddress when account changes
            } catch (error) {
                console.error("Error fetching account:", error.message);
            }
        };
        // Fetch account only if mounted and there is no connected account
        if (mounted.current && !connectedAccount) {
            fetchAccount();
        }
    }, [
        connectedAccount
    ]);
    const handleGenerateScore = async ()=>{
        // Determine the address to use
        const addressToUse = connectedAccount || userAddress;
        if (!isValidAddress(addressToUse)) {
            alert("Invalid Address. Please enter a valid address.");
            return;
        }
        // Fetch transaction data
        const fetchedTransactions = await fetchData(addressToUse, "eth");
        if (fetchedTransactions && fetchedTransactions.length > 0) {
            // Store user ID in Firebase
            (0,firebaseClient/* storeUserId */.tL)({
                userId: addressToUse
            });
            // Push each transaction individually to Firebase
            fetchedTransactions.forEach((transaction)=>{
                (0,firebaseClient/* pushTransaction */.Ug)(transaction);
            });
            // Set transactions state for ScoreTxns component
            setTransactions(fetchedTransactions);
            // Generate and set the score
            const score = generateScore(addressToUse);
            setGeneratedScore(score);
            alert("Transaction history loaded succesfully!");
            try {
                // Generate OpenAI prompt based on transactions
                const openAIPrompt = generateOpenAIPrompt(addressToUse, otherAddress, fetchedTransactions, generatedScore);
                // Generate and set insights
                const insightsResponse = await generateInsights(addressToUse, otherAddress, openAIPrompt, generatedScore);
                // Log the insightsResponse for debugging
                console.log("Insights response:", insightsResponse);
                if (insightsResponse) {
                    if (typeof insightsResponse === "string") {
                        // Set insights only if it's a string (not null)
                        setInsights(insightsResponse);
                        // Push insights to Firebase
                        (0,firebaseClient/* pushAiInsights */.zb)({
                            userAddress: addressToUse,
                            insights: insightsResponse,
                            timestamp: Date.now()
                        });
                    } else {
                        console.error("Invalid insights response:", insightsResponse);
                    }
                } else {
                    console.error("Insights response is null.");
                }
            } catch (error) {
                console.error("Error generating insights:", error);
            }
        } else {
            // Handle case where there are no transactions
            setTransactions([]); // Set transactions to an empty array
            // Set generated score to null or any default value
            setGeneratedScore(null);
            // Optionally, you can set a message or take other actions to inform the user
            console.log("No transactions available for the given address.");
            alert("No transactions or score available for the given address.");
            return; // This will prevent further execution of the function
        }
    };
    const generateOpenAIPrompt = (userAddress, otherAddress, transactions, generatedScore)=>{
        const transactionDetails = transactions.map((txn, index)=>`Transaction ${index + 1} - ${txn.type}: ${txn.usdAmount} USD involving ${txn.thirdPartyWallet}.`).join("\n");
        const prompt = `
      Analyze iDAC Trust Score for Ethereum address ${userAddress} to identify potential malicious activities. Provide insights for the relationship between addresses ${userAddress} and ${otherAddress}. iDAC Trust Score: ${generatedScore}.
      ${transactionDetails}
    `;
        // Log the generated prompt
        console.log("Generated OpenAI Prompt:", prompt);
        return prompt;
    };
    const generateScore = (address)=>{
        const hash = hashCode(address);
        const uniqueScore = Math.abs(hash) % 851;
        return uniqueScore;
    };
    const hashCode = (str)=>{
        let hash = 0;
        for(let i = 0; str && i < str.length; i++){
            const char = str.charCodeAt(i);
            hash = (hash << 5) - hash + char;
        }
        return hash;
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "main-container",
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((noop_head_default()), {
                children: /*#__PURE__*/ jsx_runtime_.jsx("title", {
                    children: "dAPP - iDAC"
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("section", {
                className: "bg-black",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                    className: "layout flex min-h-screen flex-col items-center justify-center py-12 text-center",
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx("h1", {
                            className: "text-white font-bold text-4xl mb-6",
                            children: "dAPP - iDAC"
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("h4", {
                            children: "Connect wallet or enter address"
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("p", {
                            children: "Generate iDAC Trust Score with DeFi-AI"
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("hr", {
                            style: {
                                border: "none",
                                borderRadius: "5px",
                                borderBottom: "3px solid grey",
                                width: "100%",
                                margin: "30px 0"
                            }
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            className: "image-container",
                            style: {
                                padding: "50px"
                            },
                            children: /*#__PURE__*/ jsx_runtime_.jsx((image_default()), {
                                src: "/idacscore.png",
                                alt: "idacscore",
                                width: 1600,
                                height: 1000
                            })
                        }),
                        generatedScore !== null && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            className: ` ${getColorForScore(generatedScore)}`,
                            children: /*#__PURE__*/ jsx_runtime_.jsx(ScoreHexa/* default */.Z, {
                                seed: userAddress.toLowerCase(),
                                generatedScore: generatedScore
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "flex items-center justify-center",
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                    onClick: connectWallet,
                                    style: {
                                        backgroundColor: "#913d88",
                                        color: "white",
                                        fontWeight: "300",
                                        margin: "10px",
                                        padding: "10px",
                                        borderRadius: "5px"
                                    },
                                    children: "Connect Wallet"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                    onClick: handleGenerateScore,
                                    style: {
                                        backgroundColor: "#913d88",
                                        color: "white",
                                        fontWeight: "300",
                                        margin: "10px",
                                        padding: "10px",
                                        borderRadius: "5px"
                                    },
                                    children: "Generate Score"
                                })
                            ]
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx(layouts_EthIDAC, {
                            seed: userAddress,
                            onAccountChange: handleAccountChange
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("input", {
                            type: "text",
                            placeholder: " ETH or BTC",
                            value: userAddress,
                            onChange: (e)=>setUserAddress(e.target.value),
                            style: {
                                textAlign: "center",
                                backgroundColor: "#f0f0f0",
                                color: "black",
                                margin: "10px 0"
                            }
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("hr", {
                            style: {
                                border: "none",
                                borderRadius: "5px",
                                borderBottom: "3px solid grey",
                                width: "100%",
                                margin: "90px 0"
                            }
                        }),
                        generatedScore !== null && transactions.length > 0 && /*#__PURE__*/ jsx_runtime_.jsx(ScoreTxns/* default */.Z, {
                            transactions: transactions,
                            overallScore: generatedScore
                        }),
                        generatedScore !== null && transactions.length === 0 && /*#__PURE__*/ jsx_runtime_.jsx("p", {
                            children: "No transactions available for the given address."
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "header container",
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("h2", {
                                    children: "iDAC AI:"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx(layouts_CodeTerminal, {
                                    children: insights
                                })
                            ]
                        })
                    ]
                })
            })
        ]
    });
};
/* harmony default export */ const page = (DApp);


/***/ }),

/***/ 2261:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   metadata: () => (/* binding */ metadata)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6786);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2947);
/* harmony import */ var _components_layouts_Footer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1987);
/* harmony import */ var _components_layouts_Header__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6194);




const metadata = {
    title: "dApp",
    description: "AI-POC DApp"
};
const MainLayout = ({ children })=>{
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
        className: "flex flex-col min-h-screen mx-auto",
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: "flex-grow",
            children: [
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_layouts_Header__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .ZP, {}),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("main", {
                    className: "flex flex-col max-w-7xl px-2 sm:px-4 lg:px-8 mx-auto my-0 py-4",
                    children: children
                }),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_layouts_Footer__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {})
            ]
        })
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MainLayout);


/***/ }),

/***/ 8054:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1363);

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/k3ytoshi/iDeFi-AI-PWA/src/app/(primary)/dapp/page.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [478,773,925,91,851,369,656,86,848,951,297], () => (__webpack_exec__(1085)));
module.exports = __webpack_exports__;

})();